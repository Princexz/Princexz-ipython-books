<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="IPython Cookbook, ">


    <!-- FAVICON -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">


        <link rel="alternate"  href="https://ipython-books.github.io/feeds/all.atom.xml" type="application/atom+xml" title="IPython Cookbook Full Atom Feed"/>

        <title>IPython Cookbook - 3.1. Teaching programming in the Notebook with IPython blocks</title>

    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
    <!--<![endif]-->
    <link rel="stylesheet" href="https://ipython-books.github.io/theme/css/styles.css">
    <link rel="stylesheet" href="https://ipython-books.github.io/theme/css/pygments.css">
    <!-- <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'> -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,500" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
</head>

<body>


    <header id="header" class="pure-g">
        <div class="pure-u-1 pure-u-md-3-4">
             <div id="menu">
                 <div class="pure-menu pure-menu-open pure-menu-horizontal">
<ul>
        <li><a href="/">home</a></li>
        <li><a href="https://github.com/ipython-books/cookbook-2nd-code">Jupyter notebooks</a></li>
        <li><a href="https://github.com/ipython-books/minibook-2nd-code">minibook</a></li>
        <li><a href="https://cyrille.rossant.net">author</a></li>
</ul>                </div>
            </div>
        </div>

        <div class="pure-u-1 pure-u-md-1-4">
            <div id="social">
                <div class="pure-menu pure-menu-open pure-menu-horizontal">
<ul>
        <li><a href="https://twitter.com/cyrillerossant"><i class="fa fa-twitter"></i></a></li>
        <li><a href="https://github.com/ipython-books/cookbook-2nd"><i class="fa fa-github"></i></a></li>
</ul>                </div>
            </div>
        </div>
    </header>
       

    
    <div id="layout" class="pure-g">
        <section id="content" class="pure-u-1 pure-u-md-4-4">
            <div class="l-box">

    <header id="page-header">
        <h1>3.1. Teaching programming in the Notebook with IPython blocks</h1>
    </header>

    <section id="page">
        <p><a href="/"><img src="https://raw.githubusercontent.com/ipython-books/cookbook-2nd/master/cover-cookbook-2nd.png" align="left" alt="IPython Cookbook, Second Edition" height="130" style="margin-right: 20px; margin-bottom: 10px;" /></a> <em>This is one of the 100+ free recipes of the <a href="/">IPython Cookbook, Second Edition</a>, by <a href="http://cyrille.rossant.net">Cyrille Rossant</a>, a guide to numerical computing and data science in the Jupyter Notebook. The ebook and printed book are available for purchase at <a href="https://www.packtpub.com/big-data-and-business-intelligence/ipython-interactive-computing-and-visualization-cookbook-second-e">Packt Publishing</a>.</em></p>
<p>▶&nbsp;&nbsp;<em><a href="https://github.com/ipython-books/cookbook-2nd">Text on GitHub</a> with a <a href="https://creativecommons.org/licenses/by-nc-nd/3.0/us/legalcode">CC-BY-NC-ND license</a></em><br />
▶&nbsp;&nbsp;<em><a href="https://github.com/ipython-books/cookbook-2nd-code">Code on GitHub</a> with a <a href="https://opensource.org/licenses/MIT">MIT license</a></em></p>
<p>▶&nbsp;&nbsp;<a href="https://ipython-books.github.io/chapter-3-mastering-the-jupyter-notebook/"><strong><em>Go to</em></strong> <em>Chapter 3 : Mastering the Jupyter Notebook</em></a><br />
▶&nbsp;&nbsp;<a href="https://github.com/ipython-books/cookbook-2nd-code/blob/master/chapter03_notebook/01_blocks.ipynb"><em><strong>Get</strong> the Jupyter notebook</em></a>  </p>
<p>The Jupyter Notebook is not only a tool for scientific research and data analysis but also a great tool for teaching. In this recipe, we show a simple and fun Python library for teaching programming notions: <strong>IPython Blocks</strong> (available at <a href="http://ipythonblocks.org">http://ipythonblocks.org</a>). This library allows you or your students to create grids of colorful blocks. You can change the color and size of individual blocks, and you can even animate your grids. There are many basic technical notions you can illustrate with this tool. The visual aspect of this tool makes the learning process more effective and engaging.</p>
<p>In this recipe, we will notably perform the following tasks:</p>
<ul>
<li>Illustrate matrix multiplication with an animation</li>
<li>Display an image as a block grid</li>
</ul>
<h2>Getting ready</h2>
<p>To install IPython Blocks, type <code>pip install ipythonblocks</code> in a terminal.</p>
<h2>How to do it...</h2>
<p><strong>1.&nbsp;</strong> First, we import some modules as follows:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">clear_output</span>
<span class="kn">from</span> <span class="nn">ipythonblocks</span> <span class="kn">import</span> <span class="n">BlockGrid</span><span class="p">,</span> <span class="n">colors</span>
</pre></div>


<p><strong>2.&nbsp;</strong> Now, we create a block grid with five columns and five rows, and we fill each block in purple:</p>
<div class="highlight"><pre><span></span><span class="n">grid</span> <span class="o">=</span> <span class="n">BlockGrid</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                 <span class="n">fill</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Purple&#39;</span><span class="p">])</span>
<span class="n">grid</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="A IPython Blocks grid" src="https://ipython-books.github.io/pages/chapter03_notebook/01_blocks_files/01_blocks_10_0.png" /></p>
<p><strong>3.&nbsp;</strong> We can access individual blocks with 2D indexing. This illustrates the indexing syntax in Python. We can also access an entire row or line with a <code>:</code> (colon). Each block is represented by an RGB color. The library comes with a handy dictionary of colors, assigning RGB tuples to standard color names as follows:</p>
<div class="highlight"><pre><span></span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Lime&#39;</span><span class="p">]</span>
<span class="n">grid</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Lime&#39;</span><span class="p">]</span>
<span class="n">grid</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Lime&#39;</span><span class="p">]</span>
<span class="n">grid</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="Coloring blocks" src="https://ipython-books.github.io/pages/chapter03_notebook/01_blocks_files/01_blocks_12_0.png" /></p>
<p><strong>4.&nbsp;</strong> Now, we are going to illustrate matrix multiplication. We will represent two <code>(n, n)</code> matrices, <code>A</code> (in cyan) and <code>B</code> (lime) aligned with <code>C = A B</code> (yellow). To do this, we use a small trick of creating a big white grid of size <code>(2n+1, 2n+1)</code>. The matrices <code>A</code>, <code>B</code>, and <code>C</code> are just views on parts of the grid.</p>
<div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">BlockGrid</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                 <span class="n">height</span><span class="o">=</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                 <span class="n">fill</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="s1">&#39;White&#39;</span><span class="p">])</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:,</span> <span class="p">:</span><span class="n">n</span><span class="p">]</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[:</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
<span class="n">A</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Cyan&#39;</span><span class="p">]</span>
<span class="n">B</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Lime&#39;</span><span class="p">]</span>
<span class="n">C</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Yellow&#39;</span><span class="p">]</span>
<span class="n">grid</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="Matrix multiplication with IPython blocks" src="https://ipython-books.github.io/pages/chapter03_notebook/01_blocks_files/01_blocks_14_0.png" /></p>
<p><strong>5.&nbsp;</strong> Let's turn to matrix multiplication itself. We perform a loop over all rows and columns, and we highlight the corresponding rows and columns in A and B that are multiplied together during the matrix product. We combine IPython's <code>clear_output()</code> method with <code>grid.show()</code> and <code>time.sleep()</code> (pause) to implement the animation as follows:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="c1"># We reset the matrix colors.</span>
        <span class="n">A</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Cyan&#39;</span><span class="p">]</span>
        <span class="n">B</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Lime&#39;</span><span class="p">]</span>
        <span class="n">C</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Yellow&#39;</span><span class="p">]</span>
        <span class="c1"># We highlight the adequate rows</span>
        <span class="c1"># and columns in red.</span>
        <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Red&#39;</span><span class="p">]</span>
        <span class="n">B</span><span class="p">[:,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Red&#39;</span><span class="p">]</span>
        <span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;Red&#39;</span><span class="p">]</span>
        <span class="c1"># We animate the grid in the loop.</span>
        <span class="n">clear_output</span><span class="p">()</span>
        <span class="n">grid</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">25</span><span class="p">)</span>
</pre></div>


<p><img alt="Multiplying rows and columns for matrix multiplication" src="https://ipython-books.github.io/pages/chapter03_notebook/01_blocks_files/01_blocks_16_0.png" /></p>
<p><strong>6.&nbsp;</strong> Finally, we will display an image with IPython Blocks. We download and import a PNG image with <code>matplotlib</code> and we retrieve the data as follows:</p>
<div class="highlight"><pre><span></span><span class="c1"># We downsample the image by a factor of 4 for</span>
<span class="c1"># performance reasons.</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;https://github.com/ipython-books/&#39;</span>
                 <span class="s1">&#39;cookbook-2nd-data/blob/master/&#39;</span>
                 <span class="s1">&#39;beach.png?raw=true&#39;</span><span class="p">)[::</span><span class="mi">4</span><span class="p">,</span> <span class="p">::</span><span class="mi">4</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">rgb</span> <span class="o">=</span> <span class="p">[</span><span class="n">img</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
</pre></div>


<p><strong>7.&nbsp;</strong> Now, we create a <code>BlockGrid</code> instance with the appropriate number of rows and columns, and we set each block's color to the corresponding pixel's color in the image (multiplying by 255 to convert from a floating-point number in <code>[0, 1]</code> into an 8-bit integer). We use a small block size, and we remove the lines between the blocks as follows:</p>
<div class="highlight"><pre><span></span><span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">BlockGrid</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                 <span class="n">block_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lines_on</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">block</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="o">*</span><span class="n">rgb</span><span class="p">):</span>
    <span class="n">block</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span> <span class="o">*</span> <span class="mi">255</span><span class="p">,</span> <span class="n">g</span> <span class="o">*</span> <span class="mi">255</span><span class="p">,</span> <span class="n">b</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span>
<span class="n">grid</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="&lt;IPython.core.display.HTML object&gt;" src="https://ipython-books.github.io/pages/chapter03_notebook/01_blocks_files/01_blocks_21_0.png" /></p>
    </section>

            </div>
        </section>

        <footer id="footer" class="pure-u-1 pure-u-md-4-4">
            <div class="l-box">
                <div>
                    <p>&copy; <a href="https://cyrille.rossant.net">Cyrille Rossant</a> &ndash;
                        Built with <a href="https://github.com/PurePelicanTheme/pure-single">Pure Theme</a>
                        for <a href="https://blog.getpelican.com/">Pelican</a>
                    </p>
                </div>
            </div>
        </footer>
        
    </div>
    
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=9752080; 
var sc_invisible=1; 
var sc_security="c177b501"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/9752080/0/c177b501/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>